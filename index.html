<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"
    />
    <meta name="theme-color" content="#0e2a2f" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <link rel="manifest" href="manifest.json" />
    <link rel="stylesheet" href="style.css" />
    <title>RaceTimer Start</title>
  </head>
  <body class="home-mode">
    <section id="home-view" class="shell home-view" aria-hidden="false">
      <header class="hero home-head">
        <div class="home-title">
          <h1>RaceTimer</h1>
        </div>
        <div class="home-actions">
          <button id="open-info" class="icon-btn" type="button" aria-label="About">
            <svg class="icon-info" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
              <circle cx="12" cy="12" r="9" fill="none" stroke="currentColor" stroke-width="2" />
              <line x1="12" y1="10" x2="12" y2="16" stroke="currentColor" stroke-width="2" />
              <circle cx="12" cy="7" r="1.5" fill="currentColor" />
            </svg>
          </button>
        </div>
      </header>

      <section class="panel">
        <h2>Modes</h2>
        <div class="row stack">
          <button id="open-setup" class="home-entry" type="button">Race timer</button>
          <button id="open-vmg" class="home-entry" type="button">VMG Hunter</button>
        </div>
      </section>

      <section class="panel">
        <h2>Boat</h2>
        <div class="row setting-row">
          <label for="boat-length" class="setting-label">Boat length</label>
          <div class="input-with-unit">
            <input
              id="boat-length"
              type="number"
              inputmode="decimal"
              step="0.1"
              min="0"
              placeholder="0"
            />
            <span id="boat-length-unit" class="input-unit">[m]</span>
          </div>
        </div>
        <div class="row setting-row">
          <label for="bow-offset" class="setting-label">Device to bow</label>
          <div class="input-with-unit">
            <input
              id="bow-offset"
              type="number"
              inputmode="decimal"
              step="0.1"
              min="0"
              placeholder="0"
            />
            <span id="bow-offset-unit" class="input-unit">[m]</span>
          </div>
        </div>
      </section>

      <section class="panel">
        <h2>Settings</h2>
        <div class="row setting-row">
          <div class="setting-label">Sound</div>
          <div class="race-toggle horizontal" role="group" aria-label="Sound">
            <button id="sound-on" class="race-toggle-btn" type="button" aria-pressed="true">
              On
            </button>
            <button id="sound-off" class="race-toggle-btn" type="button" aria-pressed="false">
              Off
            </button>
          </div>
        </div>
        <div class="row setting-row">
          <div class="setting-label">Time format</div>
          <div class="race-toggle horizontal" role="group" aria-label="Time format">
            <button id="time-format-24" class="race-toggle-btn" type="button" aria-pressed="true">
              24 h
            </button>
            <button id="time-format-12" class="race-toggle-btn" type="button" aria-pressed="false">
              12 h
            </button>
          </div>
        </div>
        <div class="row setting-row">
          <div class="setting-label">Speed unit</div>
          <div class="race-toggle horizontal" role="group" aria-label="Speed unit">
            <button id="speed-unit-kn" class="race-toggle-btn" type="button" aria-pressed="true">
              kn
            </button>
            <button id="speed-unit-ms" class="race-toggle-btn" type="button" aria-pressed="false">
              m/s
            </button>
            <button id="speed-unit-mph" class="race-toggle-btn" type="button" aria-pressed="false">
              mph
            </button>
          </div>
        </div>
        <div class="row setting-row">
          <div class="setting-label">Distance unit</div>
          <div class="race-toggle horizontal" role="group" aria-label="Distance unit">
            <button id="distance-unit-m" class="race-toggle-btn" type="button" aria-pressed="true">
              m
            </button>
            <button id="distance-unit-ft" class="race-toggle-btn" type="button" aria-pressed="false">
              ft
            </button>
            <button id="distance-unit-yd" class="race-toggle-btn" type="button" aria-pressed="false">
              yd
            </button>
          </div>
        </div>
        <div class="row setting-row">
          <div class="setting-label">IMU calibration</div>
          <button id="open-imu-calibration" type="button">Calibrate IMU</button>
        </div>
        <div id="imu-calibration-status" class="setting-note">IMU: not calibrated</div>
      </section>
    </section>

    <main id="setup-view" class="shell" aria-hidden="true">
      <header class="hero setup-head">
        <div class="setup-title">
          <h1>Race timer</h1>
          <button class="ghost nav-btn open-home" type="button">Home</button>
        </div>
        <div class="setup-actions">
          <div class="gps-status">
            <span>GPS</span>
            <div id="gps-icon" class="gps-icon" aria-label="GPS status" title="GPS status"></div>
          </div>
        </div>
      </header>

      <section class="panel">
        <h2 class="panel-title">My Race</h2>
        <div class="hint">Line name</div>
        <div id="status-line-name" class="value">--</div>
        <div class="hint">Distance to line</div>
        <div id="status-distance" class="value value-split">
          <span id="status-distance-value">--</span>
          <span id="status-distance-unit" class="value-unit">[m]</span>
        </div>
        <div class="hint">Line length</div>
        <div id="status-line-length" class="value value-split">
          <span id="status-line-length-value">--</span>
          <span id="status-line-length-unit" class="value-unit">[m]</span>
        </div>
        <div class="hint">Start direction</div>
        <div id="status-start-direction" class="value">--</div>
        <div class="hint">Start time</div>
        <div id="status-start-time" class="value">--</div>
        <div class="hint">Time until start</div>
        <div id="status-time" class="value">--</div>
        <div class="row stack">
          <button id="go-race" class="race-enter">Race</button>
        </div>
      </section>

      <section class="panel">
        <h2>Define Start Line</h2>
        <div class="row stack">
          <button id="open-map" class="ghost">Select on map</button>
          <button id="swap-marks" class="ghost">Swap marks</button>
          <button id="load-line" class="ghost">Saved start lines</button>
          <button id="save-line" class="ghost">Save start line…</button>
          <button id="open-location" class="ghost">Use GPS position</button>
          <button id="open-coords" class="ghost">Enter coordinates</button>
        </div>
      </section>

      <section class="panel">
        <h2>Set Start Time</h2>
        <div class="row setting-row">
          <div class="race-toggle horizontal start-toggle" role="group" aria-label="Start mode">
            <button
              id="start-mode-absolute"
              class="race-toggle-btn"
              type="button"
              aria-pressed="true"
            >
              Time
            </button>
            <button
              id="start-mode-countdown"
              class="race-toggle-btn"
              type="button"
              aria-pressed="false"
            >
              Countdown
            </button>
          </div>
        </div>
        <div class="grid">
          <div id="start-mode-absolute-panel">
            <input id="absolute-time" type="time" step="1" aria-label="Start time" />
          </div>
          <div id="start-mode-countdown-panel" hidden>
            <div class="countdown-picker" role="group" aria-label="Countdown duration">
              <select id="countdown-hours" aria-label="Countdown hours"></select>
              <span class="countdown-sep" aria-hidden="true">:</span>
              <select id="countdown-minutes" aria-label="Countdown minutes"></select>
              <span class="countdown-sep" aria-hidden="true">:</span>
              <select id="countdown-seconds" aria-label="Countdown seconds"></select>
            </div>
          </div>
        </div>
        <div class="row stack">
          <button id="set-start">Set</button>
        </div>
      </section>

      <section id="debug-panel" class="panel">
        <h2>Debug</h2>
        <div class="row stack">
          <button id="debug-gps-toggle">Simulate GPS: off</button>
          <button id="debug-imu-toggle">IMU: OFF</button>
          <button id="open-track" class="ghost">View GPS track</button>
          <button id="debug-refresh">Reload</button>
        </div>
        <div id="debug-gps-status" class="hint">GPS: --</div>
        <div id="debug-gps-delta" class="hint">Δ: --</div>
        <div id="debug-imu-rotation" class="hint">IMU rot: --</div>
        <div id="debug-imu-yaw" class="hint">IMU yaw: --</div>
      </section>

    </main>

    <section id="vmg-view" class="vmg-view" aria-hidden="true">
      <div class="vmg-shell">
        <header class="vmg-head">
          <div class="vmg-title">
            <h1>VMG Hunter</h1>
            <button class="ghost nav-btn open-home" type="button">Home</button>
          </div>
          <div class="vmg-actions">
            <div class="gps-status">
              <span>GPS</span>
              <div
                id="vmg-gps-icon"
                class="gps-icon"
                aria-label="GPS status"
                title="GPS status"
              ></div>
            </div>
          </div>
        </header>

        <section class="vmg-panel">
          <div class="vmg-tack-toggle" role="group" aria-label="Tack">
            <button
              id="vmg-tack-port"
              class="vmg-tack-btn vmg-tack-port"
              type="button"
              aria-pressed="false"
            >
              P Tack
            </button>
            <button
              id="vmg-tack-starboard"
              class="vmg-tack-btn vmg-tack-starboard"
              type="button"
              aria-pressed="true"
            >
              SB Tack
            </button>
          </div>
          <div class="vmg-bar-wrap">
            <div
              id="vmg-bar"
              class="vmg-bar"
              role="img"
              aria-label="VMG balance: bear away left, head up right"
            >
              <div id="vmg-interval" class="vmg-interval"></div>
              <div id="vmg-dot" class="vmg-dot" aria-hidden="true"></div>
            </div>
          </div>
          <div class="vmg-scale" aria-hidden="true">
            <span id="vmg-label-left" class="vmg-scale-left">Bear away</span>
            <span id="vmg-label-right" class="vmg-scale-right">Head up</span>
          </div>
        </section>

        <section class="vmg-panel">
          <div class="vmg-twa-head">
            <h2 id="vmg-twa-title">Approx TWA</h2>
            <div id="vmg-twa-value" class="vmg-twa-value">40 deg</div>
          </div>
          <input
            id="vmg-twa"
            class="vmg-twa-slider"
            type="range"
            min="35"
            max="50"
            step="1"
            value="40"
            aria-labelledby="vmg-twa-title vmg-twa-value"
          />
          <div class="vmg-twa-scale" aria-hidden="true">
            <span>35</span>
            <span>50</span>
          </div>
        </section>

        <section id="vmg-debug-panel" class="vmg-panel">
          <h2>Debug</h2>
          <div class="row stack">
            <button id="vmg-debug-refresh">Reload</button>
          </div>
        </section>
      </div>
    </section>

    <section id="race-view" class="race-view" aria-hidden="true">
      <div class="race-quad-grid">
        <div class="race-quad race-quad-direct race-block">
          <div id="race-label-direct" class="race-label">
            METERS TO LINE AT START - DIRECT
          </div>
          <div id="race-proj-direct" class="race-value" data-fit-sample="+9.99">--</div>
        </div>
        <div class="race-quad race-quad-closing race-block">
          <div id="race-label-closing" class="race-label">
            METERS TO LINE AT START - CURRENT HEADING
          </div>
          <div id="race-proj-closing" class="race-value" data-fit-sample="+9.99">--</div>
        </div>
        <div class="race-quad race-quad-time">
          <div class="race-label">Start in</div>
          <div id="race-countdown" class="race-value">--:--</div>
        </div>
        <div class="race-quad race-quad-controls">
          <div class="race-controls">
            <div class="race-stack">
              <button id="race-imu-toggle" class="race-btn">IMU: OFF</button>
              <div class="race-toggle horizontal race-toggle-full" role="group" aria-label="m/s">
                <button
                  id="race-metric-distance"
                  class="race-toggle-btn"
                  type="button"
                  aria-pressed="true"
                >
                  dist
                </button>
                <button
                  id="race-metric-time"
                  class="race-toggle-btn"
                  type="button"
                  aria-pressed="false"
                >
                  time
                </button>
              </div>
            </div>
            <div class="race-stack">
              <button id="race-plus" class="race-btn">+1 s</button>
              <button id="race-minus" class="race-btn">−1 s</button>
            </div>
            <div class="race-stack">
              <button id="sync-race" class="race-btn">Sync</button>
              <button id="close-race" class="race-btn">Race timer</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="coords-view" class="coords-view" aria-hidden="true">
      <div class="coords-panel">
        <h2>Enter Coordinates</h2>
        <div class="row coords-format-row">
          <button id="coords-format" class="ghost" type="button">Format: Decimal</button>
          <button id="coords-done-top" class="ghost" type="button" hidden>Done</button>
        </div>

        <div id="coords-format-dd">
          <div class="grid">
            <div>
              <label for="lat-a">Port mark (lat)</label>
              <input id="lat-a" type="number" step="0.000001" placeholder="55.000000" />
            </div>
            <div>
              <label for="lon-a">Port mark (lon)</label>
              <input id="lon-a" type="number" step="0.000001" placeholder="12.000000" />
            </div>
            <div>
              <label for="lat-b">Starboard mark (lat)</label>
              <input id="lat-b" type="number" step="0.000001" placeholder="55.000000" />
            </div>
            <div>
              <label for="lon-b">Starboard mark (lon)</label>
              <input id="lon-b" type="number" step="0.000001" placeholder="12.000000" />
            </div>
          </div>
        </div>

        <div id="coords-format-ddm" hidden>
          <div class="coords-marks">
            <div class="coords-mark-panel">
              <h3>Port mark</h3>
              <div class="coords-latlon">
                <div class="coords-latlon-row">
                  <div>
                    <label for="lat-a-deg-ddm">Lat (°)</label>
                    <select id="lat-a-deg-ddm"></select>
                  </div>
                  <div>
                    <label for="lat-a-min-ddm">Lat (')</label>
                    <div class="coords-composite-input">
                      <select id="lat-a-min-ddm"></select>
                      <span class="coords-decimal-dot" aria-hidden="true">.</span>
                    <input
                      id="lat-a-min-dec-ddm"
                      class="coords-decimals"
                      type="text"
                      inputmode="numeric"
                      pattern="[0-9]*"
                      maxlength="10"
                      placeholder="0000000000"
                      aria-label="Port latitude minutes decimals"
                    />
                    </div>
                  </div>
                <div>
                  <label for="lat-a-hemi-ddm">Lat</label>
                  <input type="hidden" id="lat-a-hemi-ddm" value="N" />
                  <div class="coords-hemis" data-target="lat-a-hemi-ddm">
                    <button type="button" class="coords-hemisphere" data-value="N" aria-label="North">N</button>
                    <button type="button" class="coords-hemisphere" data-value="S" aria-label="South">S</button>
                  </div>
                </div>
                </div>

                <div class="coords-latlon-row">
                  <div>
                    <label for="lon-a-deg-ddm">Lon (°)</label>
                    <select id="lon-a-deg-ddm"></select>
                  </div>
                  <div>
                    <label for="lon-a-min-ddm">Lon (')</label>
                    <div class="coords-composite-input">
                      <select id="lon-a-min-ddm"></select>
                      <span class="coords-decimal-dot" aria-hidden="true">.</span>
                    <input
                      id="lon-a-min-dec-ddm"
                      class="coords-decimals"
                      type="text"
                      inputmode="numeric"
                      pattern="[0-9]*"
                      maxlength="10"
                      placeholder="0000000000"
                      aria-label="Port longitude minutes decimals"
                    />
                    </div>
                  </div>
                <div>
                  <label for="lon-a-hemi-ddm">Lon</label>
                  <input type="hidden" id="lon-a-hemi-ddm" value="E" />
                  <div class="coords-hemis" data-target="lon-a-hemi-ddm">
                    <button type="button" class="coords-hemisphere" data-value="E" aria-label="East">E</button>
                    <button type="button" class="coords-hemisphere" data-value="W" aria-label="West">W</button>
                  </div>
                </div>
                </div>
              </div>
            </div>

            <div class="coords-mark-panel">
              <h3>Starboard mark</h3>
              <div class="coords-latlon">
                <div class="coords-latlon-row">
                  <div>
                    <label for="lat-b-deg-ddm">Lat (°)</label>
                    <select id="lat-b-deg-ddm"></select>
                  </div>
                  <div>
                    <label for="lat-b-min-ddm">Lat (')</label>
                    <div class="coords-composite-input">
                      <select id="lat-b-min-ddm"></select>
                      <span class="coords-decimal-dot" aria-hidden="true">.</span>
                    <input
                      id="lat-b-min-dec-ddm"
                      class="coords-decimals"
                      type="text"
                      inputmode="numeric"
                      pattern="[0-9]*"
                      maxlength="10"
                      placeholder="0000000000"
                      aria-label="Starboard latitude minutes decimals"
                    />
                    </div>
                  </div>
                <div>
                  <label for="lat-b-hemi-ddm">Lat</label>
                  <input type="hidden" id="lat-b-hemi-ddm" value="N" />
                  <div class="coords-hemis" data-target="lat-b-hemi-ddm">
                    <button type="button" class="coords-hemisphere" data-value="N" aria-label="North">N</button>
                    <button type="button" class="coords-hemisphere" data-value="S" aria-label="South">S</button>
                  </div>
                </div>
                </div>

                <div class="coords-latlon-row">
                  <div>
                    <label for="lon-b-deg-ddm">Lon (°)</label>
                    <select id="lon-b-deg-ddm"></select>
                  </div>
                  <div>
                    <label for="lon-b-min-ddm">Lon (')</label>
                    <div class="coords-composite-input">
                      <select id="lon-b-min-ddm"></select>
                      <span class="coords-decimal-dot" aria-hidden="true">.</span>
                    <input
                      id="lon-b-min-dec-ddm"
                      class="coords-decimals"
                      type="text"
                      inputmode="numeric"
                      pattern="[0-9]*"
                      maxlength="10"
                      placeholder="0000000000"
                      aria-label="Starboard longitude minutes decimals"
                    />
                    </div>
                  </div>
                <div>
                  <label for="lon-b-hemi-ddm">Lon</label>
                  <input type="hidden" id="lon-b-hemi-ddm" value="E" />
                  <div class="coords-hemis" data-target="lon-b-hemi-ddm">
                    <button type="button" class="coords-hemisphere" data-value="E" aria-label="East">E</button>
                    <button type="button" class="coords-hemisphere" data-value="W" aria-label="West">W</button>
                  </div>
                </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div id="coords-format-dms" hidden>
          <div class="coords-marks">
            <div class="coords-mark-panel">
              <h3>Port mark</h3>
              <div class="grid">
                <div>
                  <label for="lat-a-deg-dms">Lat (°)</label>
                  <select id="lat-a-deg-dms"></select>
                </div>
                <div>
                  <label for="lat-a-min-dms">Lat (')</label>
                  <select id="lat-a-min-dms"></select>
                </div>
                <div>
                  <label for="lat-a-sec-dms">Lat (")</label>
                  <div class="coords-composite-input">
                    <select id="lat-a-sec-dms"></select>
                    <span class="coords-decimal-dot" aria-hidden="true">.</span>
                    <input
                      id="lat-a-sec-dec-dms"
                      class="coords-decimals"
                      type="text"
                      inputmode="numeric"
                      pattern="[0-9]*"
                      maxlength="10"
                      placeholder="0000000000"
                      aria-label="Port latitude seconds decimals"
                    />
                  </div>
                </div>
                <div>
                  <label for="lat-a-hemi-dms">Lat</label>
                  <input type="hidden" id="lat-a-hemi-dms" value="N" />
                  <div class="coords-hemis" data-target="lat-a-hemi-dms">
                    <button type="button" class="coords-hemisphere" data-value="N" aria-label="North">N</button>
                    <button type="button" class="coords-hemisphere" data-value="S" aria-label="South">S</button>
                  </div>
                </div>

                <div>
                  <label for="lon-a-deg-dms">Lon (°)</label>
                  <select id="lon-a-deg-dms"></select>
                </div>
                <div>
                  <label for="lon-a-min-dms">Lon (')</label>
                  <select id="lon-a-min-dms"></select>
                </div>
                <div>
                  <label for="lon-a-sec-dms">Lon (")</label>
                  <div class="coords-composite-input">
                    <select id="lon-a-sec-dms"></select>
                    <span class="coords-decimal-dot" aria-hidden="true">.</span>
                    <input
                      id="lon-a-sec-dec-dms"
                      class="coords-decimals"
                      type="text"
                      inputmode="numeric"
                      pattern="[0-9]*"
                      maxlength="10"
                      placeholder="0000000000"
                      aria-label="Port longitude seconds decimals"
                    />
                  </div>
                </div>
                <div>
                  <label for="lon-a-hemi-dms">Lon</label>
                  <input type="hidden" id="lon-a-hemi-dms" value="E" />
                  <div class="coords-hemis" data-target="lon-a-hemi-dms">
                    <button type="button" class="coords-hemisphere" data-value="E" aria-label="East">E</button>
                    <button type="button" class="coords-hemisphere" data-value="W" aria-label="West">W</button>
                  </div>
                </div>
              </div>
            </div>

            <div class="coords-mark-panel">
              <h3>Starboard mark</h3>
              <div class="grid">
                <div>
                  <label for="lat-b-deg-dms">Lat (°)</label>
                  <select id="lat-b-deg-dms"></select>
                </div>
                <div>
                  <label for="lat-b-min-dms">Lat (')</label>
                  <select id="lat-b-min-dms"></select>
                </div>
                <div>
                  <label for="lat-b-sec-dms">Lat (")</label>
                  <div class="coords-composite-input">
                    <select id="lat-b-sec-dms"></select>
                    <span class="coords-decimal-dot" aria-hidden="true">.</span>
                    <input
                      id="lat-b-sec-dec-dms"
                      class="coords-decimals"
                      type="text"
                      inputmode="numeric"
                      pattern="[0-9]*"
                      maxlength="10"
                      placeholder="0000000000"
                      aria-label="Starboard latitude seconds decimals"
                    />
                  </div>
                </div>
                <div>
                  <label for="lat-b-hemi-dms">Lat</label>
                  <input type="hidden" id="lat-b-hemi-dms" value="N" />
                  <div class="coords-hemis" data-target="lat-b-hemi-dms">
                    <button type="button" class="coords-hemisphere" data-value="N" aria-label="North">N</button>
                    <button type="button" class="coords-hemisphere" data-value="S" aria-label="South">S</button>
                  </div>
                </div>

                <div>
                  <label for="lon-b-deg-dms">Lon (°)</label>
                  <select id="lon-b-deg-dms"></select>
                </div>
                <div>
                  <label for="lon-b-min-dms">Lon (')</label>
                  <select id="lon-b-min-dms"></select>
                </div>
                <div>
                  <label for="lon-b-sec-dms">Lon (")</label>
                  <div class="coords-composite-input">
                    <select id="lon-b-sec-dms"></select>
                    <span class="coords-decimal-dot" aria-hidden="true">.</span>
                    <input
                      id="lon-b-sec-dec-dms"
                      class="coords-decimals"
                      type="text"
                      inputmode="numeric"
                      pattern="[0-9]*"
                      maxlength="10"
                      placeholder="0000000000"
                      aria-label="Starboard longitude seconds decimals"
                    />
                  </div>
                </div>
                <div>
                  <label for="lon-b-hemi-dms">Lon</label>
                  <input type="hidden" id="lon-b-hemi-dms" value="E" />
                  <div class="coords-hemis" data-target="lon-b-hemi-dms">
                    <button type="button" class="coords-hemisphere" data-value="E" aria-label="East">E</button>
                    <button type="button" class="coords-hemisphere" data-value="W" aria-label="West">W</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="row stack">
          <button id="swap-coords" class="ghost" type="button">Swap marks</button>
          <button id="close-coords">Done</button>
        </div>
      </div>
    </section>

    <section id="location-view" class="location-view" aria-hidden="true">
      <div class="coords-panel">
        <h2>Use GPS</h2>
        <div class="row stack">
          <button id="use-a" class="ghost">Set port mark (GPS)</button>
          <button id="use-b" class="ghost">Set starboard mark (GPS)</button>
          <button id="swap-location" class="ghost" type="button">Swap marks</button>
        </div>
        <div class="hint">Best accuracy: hold still or move straight at steady speed when marking.</div>
        <div class="row stack">
          <button id="close-location">Done</button>
        </div>
      </div>
    </section>

    <section id="info-view" class="info-view" aria-hidden="true">
      <div class="coords-panel">
        <h2>About</h2>
        <div class="info-meta">
          <span>Version: 0.1</span>
          <span>Date: 12-1-2026</span>
          <span>Author: Casper Hillerup Lyhne</span>
        </div>
        <p class="info-text">
          RaceTimer is a small, offline-friendly race start companion for sailors who want
          clear numbers and fast decisions at the line.
        </p>
        <p class="info-text">
          This is a tool, not a gadget. The design is stark and high-contrast on purpose so it
          stays readable when it matters.
        </p>
        <ul class="info-list">
          <li>GPS and IMU are contextualized by a boat movement model for superior heading and position accuracy, so you can nail the start line.</li>
          <li>Bow offset: set where the device sits so the line is judged at the bow, not your pocket.</li>
          <li>Two answers, one decision: towards the line at current speed, or at current heading. Pick the one that matches your plan.</li>
          <li>False start check: the warning is unmistakable if you are on the wrong side at the gun.</li>
        </ul>
        <p class="info-text">
          The app tries to keep the screen awake in race mode, but iOS may still dim or lock it.
          For the best experience, disable screen auto-lock while racing.
        </p>
        <div class="row stack">
          <button id="close-info">Done</button>
        </div>
      </div>
    </section>

    <section id="track-view" class="track-view" aria-hidden="true">
      <canvas id="track-canvas" width="300" height="300" aria-label="GPS debug view"></canvas>
      <button id="close-track" class="track-close">Done</button>
    </section>

    <section id="imu-calibration-modal" class="modal" aria-hidden="true">
      <div class="modal-panel">
        <h2>IMU Calibration</h2>
        <p class="info-text">Place the device flat, screen up.</p>
        <p class="info-text">Tap Start and rotate clockwise for 3 seconds.</p>
        <div id="imu-calibration-progress" class="hint">Ready.</div>
        <div class="modal-actions">
          <button id="start-imu-calibration">Start</button>
          <button id="close-imu-calibration" class="ghost">Close</button>
        </div>
      </div>
    </section>

    <section id="load-line-modal" class="modal" aria-hidden="true">
      <div class="modal-panel">
        <h2>Load Start Line</h2>
        <div id="saved-lines-list" class="modal-list"></div>
        <div class="modal-actions">
          <button id="confirm-load">Use line</button>
          <button id="confirm-delete" class="ghost danger">Delete line</button>
          <button id="close-load" class="ghost">Cancel</button>
        </div>
      </div>
    </section>

    <script type="module" src="app.js"></script>
  </body>
</html>
